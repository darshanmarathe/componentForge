<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ComponentForge - Playground</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <link rel="stylesheet" href="./css/style.css" />

    <script src="https://code.jquery.com/jquery-3.6.2.min.js"
        integrity="sha256-2krYZKh//PcchRtd+H+VyyQoZ/e3EcrkxhM8ycwASPA=" crossorigin="anonymous"></script>

</head>

<body>

    <div>
        <div class="row">
            <div class="col-6">
                <div class="container">
                <select class="form-control" style="width: 100%" name="code" id="code">
                    <option value="">Select</option>
                </select>
                </div>
            </div>
            <br>
            <div class="col-6">
                <div class="container">
                <form target="prev" action="preview" method="post">
                    Preview
                    <input id="run" class="btn btn-primary" type="submit" value="Run">

                    <input type="hidden" name="html" value="<cf-basic name='marathe'> WC </cf-basic>">
                    <input type="hidden" name="js" id="hidjs">




                </form>

                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-6">
                <div class="container">


                    <div class="tabs">
                        <div class="tabby-tab">
                            <input type="radio" id="tab-1" name="tabby-tabs" checked>
                            <label for="tab-1">Web Component</label>
                            <div class="tabby-content">
                                <code-editor id="codeEditor"></code-editor>
                            </div>
                        </div>

                        <div class="tabby-tab">
                            <input type="radio" id="tab-2" name="tabby-tabs">
                            <label for="tab-2">HTML</label>
                            <div class="tabby-content">
                                <!-- <code-editor id="codeEditorHTML"></code-editor> -->
                            </div>
                        </div>

                        <div class="tabby-tab">
                            <input type="radio" id="tab-3" name="tabby-tabs">
                            <label for="tab-3">Page JS</label>
                            <div class="tabby-content">
                                <!-- <code-editor id="codeEditorJS"></code-editor> -->
                            </div>
                        </div>

                    </div>

                </div>
               
            </div>

            <div class="col-6">
                <div class="container" style="padding: 0px;">
                <iframe name="prev">
                    Hello
                </iframe>
           </div>
            </div>
        </div>
       
    </div>
    </div>

    <pre class="hidden" id="basic">
        function Basic(){
            console.log('helllooo.......')
         }
         
         Basic();
         
    </pre>

    <pre class="hidden" id="scrolltobottom" title="Scroll to Bottom">
        
 let item = 0
 function Advanced(){
console.log("Hello " + item++)
 }


 setInterval(function() {Advanced()} , 1000)
    </pre>

    <pre class="hidden" id="closure">

import {Component , html , Tag} from 'https://cdn.jsdelivr.net/npm/componentforge'


export default class Basic extends Component {
    Template(){
        return html`Hello ${this.props.name || 'world'}
        <br>
        You are cool 
        
        `
    }

    Style(){
        return ''
    }
}


Tag('cf-basic' , Basic)
        </pre>

    <pre class="hidden" id="webcomponent" title="Web Component">

import {Component , html , Tag} from 'https://cdn.jsdelivr.net/npm/componentforge'


export default class MyComponent extends Component{
    

constructor(){
  const  _props ={
        mydata : ""
    } 
    super(true , _props)
}
    Template(){

        return html`
         <h2>Hello world</h2>
           `
    }

    Style(){
        return html`
        <style>
            h2{
                color:red
            }
        
        </style>
        `
    }

}

Tag('cf-basic' , MyComponent)
        
        </pre>
    <script src="./js/codeeditor.js" type="module"></script>

    <script type="module">

        $(function () {


            let strOptions = $("#code").html();

            $("pre").each(function () {
                const str = ` <option value="${$(this).prop("id")}">${$(this).prop("title") || $(this).prop("id")
                    }</option>`;
                strOptions += str;
            });

            $("#code").html(strOptions);
            document.querySelector("#code").addEventListener("change", (e) => {
                const codeContainer = "#" + e.target.value;
                const code = document.querySelector(codeContainer).innerHTML;

                document.querySelector("#codeEditor").value = code;
            });

            $("#run").click((e) => {


                $('#hidjs').val(document.querySelector("#codeEditor").Code)


                // $.post('preview', {
                //     "html": "<cf-basic name='marathe'> WC </cf-basic>",
                //     "js":  document.querySelector("#codeEditor").Code
                // }, (data) => {
                //     console.log(data)
                //     $('#prev').html(data);  
                // }
                // )

            });
        }); x




    </script>


</body>

</html>